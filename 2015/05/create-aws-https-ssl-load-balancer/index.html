<!DOCTYPE html>
<html>
<head>
    <!-- [[! Document Settings ]] -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- [[! Page Meta ]] -->
    <title>Create AWS Https / SSL Load Balancer</title>
    <meta name="description" content="Ashish Pandey - Amused at technology" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/assets/images/favicon.ico" >

    <!-- [[! Styles'n'Scripts ]] -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css"
          href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css" />

    <!-- [[! highlight.js ]] -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- [[! Ghost outputs important style and meta data with this tag ]] -->
        <link rel="canonical" href="/" />
    <meta name="referrer" content="origin" />
    <link rel="next" href="/page2/" />

    <meta property="og:site_name" content="Ashish Pandey" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Ashish Pandey" />
    <meta property="og:description" content="Amused at technology" />
    <meta property="og:url" content="/" />
    <meta property="og:image" content="/assets/images/cover1.jpg" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Ashish Pandey" />
    <meta name="twitter:description" content="Amused at technology" />
    <meta name="twitter:url" content="/" />
    <meta name="twitter:image:src" content="/assets/images/cover1.jpg" />

    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Website",
    "publisher": "Ashish Pandey",
    "url": "/",
    "image": "/assets/images/cover1.jpg",
    "description": "Amused at technology"
}
    </script>

    <meta name="generator" content="Jekyll 3.0.0" />
    <link rel="alternate" type="application/rss+xml" title="Ashish Pandey" href="/feed.xml" />


</head>
<body class="home-template nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        <li class="nav-home " role="presentation"><a href="/">Home</a></li>
        <li class="nav-about " role="presentation"><a href="/about">About</a></li>
        <li class="nav-author " role="presentation"><a href="/author/ashishapy">Author</a></li>
    </ul>
    <a class="subscribe-button icon-feed" href="/feed.xml">Subscribe</a>
</div>
<span class="nav-cover"></span>

    <div class="site-wrapper">

        <!-- [[! Everything else gets inserted here ]] -->
        <!-- < default -->

<!-- The comment above "< default" means - insert everything in this file into -->
    <!-- the [body] of the default.hbs template, which contains our header/footer. -->

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<header class="main-header post-head " style="background-image: url(/assets/images/cover8.jpg) ">
    <nav class="main-nav  overlay  clearfix">
        <a class="blog-logo" href="/"><img src="/assets/images/logofh.png" alt="Blog Logo" /></a>
        
            <a class="menu-button icon-menu" href="#"><span class="word">Menu</span></a>
        
    </nav>
</header>

<main class="content" role="main">

    <article class="post tag-test tag-content">

        <header class="post-header">
            <h1 class="post-title">Create AWS Https / SSL Load Balancer</h1>
            <section class="post-meta">
             <a href='/author/ashishapy'>Ashish Pandey</a> 
            <time class="post-date" datetime="2015-05-24">24 May 2015</time>
                <!-- [[tags prefix=" on "]] -->
                 
                on 
                
                    
                       <a href='/tag/AWS'>Aws</a>,
                       
                
                    
                       <a href='/tag/SSL'>Ssl</a>
                       
                
                
            </section>
        </header>

        <br>
        
        <section class="post-content">
            
            <p>I got class 1 SSL certificate free from <a href="https://www.startssl.com/">StartSSL</a> for my domain. 
If you are interested to know more about this, follow my posts here <a href="http://bit.ly/1L6XePf">Get SSL Certificate (Free) &amp; Enable https on nginx</a></p>

<p>I have hosted my domain on AWS EC2 instance and I want to build it around scalable &amp; reliable architecture. Using load balancer with auto scaling group is the way to go.</p>

<p>I took below steps to achieve this.
A. Create HTTPS / SSL Load Balancer (Talk of the post)
B. Create Auto scaling group using above load balancer
C. Configure Route 53 to use load balancer instead of Elastic IP.</p>

<p>Let’s build AWS HTTPS / SSL EC2 load balancer.</p>

<p><strong>Synopsis:</strong>
Topics covered are, roughly.
A. Define Load Balancer Protocol
B. Assign Security Group
C. Assign SSL Certificate
D. Add EC2 Instance</p>

<p>You should have aws account, basic understanding of aws and one or more running EC2 instances before creating load balancer.</p>

<p><strong>Step 1:</strong>
Login with your aws credentials to go to <a href="https://ap-southeast-1.console.aws.amazon.com/ec2/v2/home">aws ec2 management console</a>.
Check the region you are in and it is as expected.
Click on ‘Load Balancers’ under ‘Network &amp; Security’ section.
<img src="//cdn.ashishapy.com/2015/May/1elb-1432444010267.jpg" alt="'Load Balancers' under 'Network &amp; Security'" />
Click ‘Create Load Balancer’ on right side of screen.
<img src="//cdn.ashishapy.com/2015/May/2elb-1432444285176.jpg" alt="Click 'Create Load Balancer'" /></p>

<p><strong>Step 2:</strong>
Define basic configuration of load balancer.
Add https listener configuration, https protocol for both load balancer &amp; instance.
<img src="//cdn.ashishapy.com/2015/May/3elb-1432444641729.jpg" alt="basic configuration of load balancer" />
Click on ‘Next: Assign Security Group’</p>

<p><strong>Step 3:</strong>
Add security group. Either choose existing security group or create a new one. Allow all http &amp; https traffic to your load balancer.
<img src="//cdn.ashishapy.com/2015/May/4elb-1432446047203.jpg" alt="Add security group" />
Click on ‘Next: Configure Security Settings’.</p>

<p><strong>Step 4:</strong>
Here it gets bit tricky. Provide your SSL certificate details.
<img src="//cdn.ashishapy.com/2015/May/5elb-1432446553171.jpg" alt="SSL certificate details" />
==I had class 1 private key &amp; SSL certificate from StartSSL which was pem encoded. In case you want to know, how to get these, please check my post here <a href="https://blog.ashishapy.com/part-12-get-ssl-certificate-free/">Part 1/2 - Get SSL certificate (free)</a>==</p>

<p><strong>Private Key:</strong> 
Copy &amp; paste content of private key (ssl.key) in this box.
<strong>Public Key Certificate:</strong> 
Copy &amp; paste content of your domain certificate (ssl.crt) here.
<strong>Certificate Chain:</strong>
Copy and paste content of your certificate of intermediate CA (sub.class1.server.ca.pem). Do not use certificate of Root CA. It won’t work here.</p>

<p>Remove any extra space at the end of key / certificate.</p>

<p><strong>Step 5:</strong>
Complete rest of the steps as per instruction on UI.</p>

<p><em>Configure Health Check:</em> 
 Keep default values there or you can choose to make changes as per own preferences. Click on ‘Next: Add EC2 Instances’.</p>

<p><em>Add EC2 Instances:</em>
Select EC2 instances, you wanna add to the load balancer. Click on ‘Next: Add Tag’</p>

<p><em>Add Tags:</em>
Create tag here or leave it blank as I did. Click ‘Review &amp; Create’</p>

<p><em>Review:</em>
Review the details you entered before in this screen. If all are good then click on ‘Create’ button.</p>

<p>The next screen will show you the status of load balancer. If all went well then it will create load balancer. In case you get any error related to private key or certificate then you have go through whole process again to create load balancer. This time carefully enter private key &amp; certificate.</p>

<p>Well Done! You got a load balancer for your EC2 instances which is https enabled.</p>

<p>Please leave comments / reviews or share on twitter.</p>


        </section>

        <footer class="post-footer">

            <!-- Everything inside the #author tags pulls data from the author -->
            <!-- #author-->

            
            <figure class="author-image">
                <a class="img" href="/author/ashishapy" style="background-image: url(/assets/images/profile.jpg)"><span class="hidden">'s Picture</span></a>
            </figure>
            

            <section class="author">
                <h4><a href="/author/ashishapy">Ashish Pandey</a></h4>
                
                <div class="author-meta">
                    <span class="author-location icon-location"> Bengaluru, India</span> 
                    <span class="author-link icon-link"><a href="https://blog.ashishapy.com/"> blog.ashishapy.com</a></span> 
                </div>
            </section>

            <!-- /author  -->

            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="http://twitter.com/share?text=Create AWS Https / SSL Load Balancer&amp;url=https://blog.ashishapy.com/2015/05/create-aws-https-ssl-load-balancer/"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.ashishapy.com/2015/05/create-aws-https-ssl-load-balancer/"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=https://blog.ashishapy.com/2015/05/create-aws-https-ssl-load-balancer/"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>
            
            <!-- Add Disqus Comments -->
            
                <div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/

var disqus_config = function () {
this.page.url = 'https://blog.ashishapy.com//2015/05/create-aws-https-ssl-load-balancer/'; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = '/2015/05/create-aws-https-ssl-load-balancer/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//ashishapy.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
            
            
        </footer>

    </article>

</main>

<aside class="read-next">

    <!-- [[! next_post ]] -->
    
        <a class="read-next-story " style="background-image: url(/assets/images/cover8.jpg)" href="/2015/06/https-aws-cloudfront-with-free-custom-ssl/">
            <section class="post">
                <h2>AWS https CloudFront with Free Custom SSL</h2>
                <p>I wanted to deliver images on my website through a secure CDN (in case of...</p>
            </section>
        </a>
    
    <!-- [[! /next_post ]] -->
    <!-- [[! prev_post ]] -->
    
        <a class="read-next-story prev " style="background-image: url(/assets/images/cover4.jpg)" href="/2015/05/part-22-configure-nginx-web-server/">
            <section class="post">
                <h2>Part 2/2 - Configure SSL on nginx web server</h2>
                <p>nginx (pronounced engine-x) is a free, open-source, light-weight, high-performance, load balancer, HTTP cache, and a...</p>
            </section>
        </a>
    
    <!-- [[! /prev_post ]] -->
</aside>

<!-- /post -->


        <footer class="site-footer clearfix">
          <section class="copyright"><a href="/">Ashish Pandey</a> &copy; 2017</section>
          <section class="poweredby"><a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 Unported License</a></section>
        </footer>
    </div>
    <!-- [[! Ghost outputs important scripts and data with this tag ]] -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <!-- [[! The main JavaScript file for Casper ]] -->
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>

    <!-- Add Google Analytics  -->
        <!-- Google Analytics Tracking code -->
     <script>
	    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	    ga('create', 'UA-64427924-1', 'auto');
	    ga('send', 'pageview');

     </script>   
</body>
</html>
